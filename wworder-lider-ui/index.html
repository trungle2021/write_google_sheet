<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,400;0,500;0,600;0,700;1,300&display=swap"
        rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="wworder-container">
        <div class="header">
            <h1 class="header-page-title">Make your worldwide orders</h1>
            <hr class="header-line">
        </div>
        <div class="main">
            <h3 class="main-form-title">Order Details</h3>
            <form class="main-form" id="form-wworder">
                <div class="customer main-form-section">
                    <div class="customer-information">
                        <h4 class="title-section">Customer Information:</h4>
                        <div class="main-form-group ">
                            <input type="text" name="fullname" placeholder="Full name*" class="main-form-single-input"
                                required />
                        </div>

                        <div class="main-form-group">
                            <input type="text" name="email" placeholder="Email*" required>
                            <input type="text" name="phone" placeholder="Phone*" required>
                        </div>

                        <div class="main-form-group">
                            <input type="text" name="country" placeholder="Country*" required>
                            <input type="text" name="postal_code" placeholder="Postal Code*" required>
                        </div>

                        <div class="main-form-group single-input">
                            <input type="text" name="address" placeholder="Address*" class="main-form-single-input"
                                required>
                        </div>

                    </div>
                    <div class="customer-message">
                        <h4 class="title-section">Message:</h4>
                        <textarea name="message" id="message" form="form-wworder"
                            placeholder="Let us know if you would like any further assistance"></textarea>
                    </div>
                </div>
                <div class="order main-form-section">
                    <h4 class="title-section">Order Information:</h4>
                    <p class="order-header">List down the product you would like to purchase with the detailed
                        information: Product Name - Size - Color - Quantity.</p>
                    <div class="order-example">
                        <p>Example</p>
                        <p>Hickey Jeans - Size M - 1</p>
                        <p>Ua Tee - Size XS - 2</p>
                    </div>
                    <textarea name="order_items" placeholder="Product Name - Size - Color - Quantity*"></textarea>
                </div>

                <div class="customer-message-mobile main-form-section">
                    <h4 class="title-section">Message:</h4>
                    <textarea name="message" id="message-mobile"
                        placeholder="Let us know if you would like any further assistance"></textarea>
                </div>

                <div class="notice main-form-section">
                    <h4 class="title-section">Notice:</h4>
                    <p class="notice-header">Once you have completed your order, our Sales Staff will reach out to you
                        within 3 working days via the email you have provided to arrange payment and shipping services.
                    </p>
                    <p class="notice-header">You can proceed with the payment once you have confirmed the Order Summary,
                        which includes the Product Info, Total amount including shipping fees, and the chosen Delivery
                        method.</p>
                    <p class="notice-header">Learn more about our <a href="#">Terms & Conditions</a>.</p>
                </div>
                <button type="submit" class="main-form-button-submit" id="submitFormWWOBtn">
                    Submit
                </button>
                <!-- <div style="background-color: black;">
                    <div class="lds-facebook">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div> -->
              
                <!-- Modal -->
                <div class="modal fade" id="modal-thankyou" role="dialog">
                  <div class="modal-dialog modal-lg">
                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-header text-center">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title thankyou-title">Thank you for placing your order. </h4>
                      </div>
                      <div class="modal-body">
                        <p class="thankyou-content">We have successfully received it and will contact you via email within three business days to proceed with your order. For any further assistance, please feel free to reach out to us at support@lider.vn. Thank you!</p>
                    </div>
                    <div class="modal-footer text-center">
                        <span class="text-center">Redirecting to homepage...</span>
                    </div>
                    
                    </div>
                    
                  </div>
                </div>

            </form>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

</body>

</html>

<script>
    $(document).ready(function () {
        const submitFormWWOBtn = $("#submitFormWWOBtn");

        const url = "http://localhost:1337/lider/writesheet/createOrderRequest"

        if ($(window).width() <= 767) {
            $("#message").attr("disabled", true)
            $("#message-mobile").attr("disabled", false)
        } else {
            $("#message").attr("disabled", false)
            $("#message-mobile").attr("disabled", true)
        }

        const form_wworder = $("#form-wworder")

        const writeSheet = (url, data) => {
            return new Promise((resolve, reject) => {
                fetch(url, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => resolve(response))
                    .catch(error => {
                        reject(error)
                    });
            })
        }
        form_wworder.submit(function (e) {
            e.preventDefault();
            submitFormWWOBtn.text("Sending...")
            const data = form_wworder.serializeArray().reduce(function (obj, item) {
                obj[item.name] = item.value;
                return obj;
            }, {});
            
            form_wworder.each(function(){
                this.reset();
            });
            writeSheet(url, data)
                .then(response => {
                    if (response.status === 200) {
                        $("#modal-thankyou").modal('show');
                         submitFormWWOBtn.text("Submit")
                         setTimeout(()=>{
                            window.location.href = "https://www.lider.vn/"
                         },2000)

                    }
                })
                .catch(error => console.log("Error:", error));
        });

    });
</script>